# moyai_samples

MoyaiのRemoteHeadを用いたサンプルゲームです。

## ソースコードの初期化

1. git clone moyai_sample
2. cd moyai_sample
3. git submodule update --init moyai

## サンプルゲームのビルド

1. moyai_sample/moyaiをビルドする(Moyaiのビルド手順に従う)
2. moyai_sample/Makefile で make する。  dm, rv, duel,bench,scrollの5つが生成される。


## サンプルゲームの内容・操作

- dm : 弾幕シューティングゲーム

<img src="images/doc/danmaku_ss.png" width=400>

W,A,S,Dキーを使って自機を操作し、スペースキーを使ってビームを撃ち、敵キャラクターを破壊します。
このサンプルは、自機の弾・敵の弾を含めて、とにかく大量の、
500〜1000個程度のスプライトが画面上を動き回るようになっています。
大量のスプライトが動いている状態でどの程度通信帯域を消費するのかを実際に検証することができます。

- rv : リバーシ

<img src="images/doc/reversi_ss.png" width=400>

マウスを使って、リバーシをプレイすることができます。
NEXT: WHITEと表示されているときにクリックすると白が置かれ、NEXT:BLACKと表示されているときは黒が置かれます。
すでにピースが置かれているところをクリックすると、反転します。
自動的に反転させたり、勝敗を判定したりする機能はありません。

このサンプルは、ほとんどのときに画面が静止しているようなゲームにおいて、
通信帯域の消費をどれだけ小さくできるかを検証することができます。


- duel : 対戦格闘

<img src="images/doc/duel_ss.png" width=400>

A,Dキーを使って左右に移動し、Wキーを使ってジャンプします。
スペースキーを押し下げているあいだはエネルギーをチャージし、
スペースキーを離すと、溜めたエネルギーを弾として発射します。
大きいエネルギー弾を相手に当てるほど強く跳ね飛ばすことができ、
場外に押し出せば勝利です。
また、体当たりして押すこともできます。

このサンプルによって、対戦格闘ゲームのような遅延を嫌う内容のゲームを、
リモートレンダリング方式のうえで、どの程度満足にプレイできるかを検証することができます。

- bench : スプライトストリームのベンチマーク

<img src="images/doc/bench_ss.png" width=400>

マウスの左ボタンを押すと、Prop2Dが無限に増加していきます。
ひたすら増加させていくと、viewerを用いている場合は、その環境における通信帯域の限界値を測定できます。


- scroll : スクロールゲーム/ズームイン・アウトの動作試験

<img src="images/doc/scroll_ss.png" width=400>

広いマップの中をスクロールして移動するようなゲームにおける通信帯域消費のテストをすることができます。
画面外に出てしまった部分に関する通信を無駄に行っていないかどうかを確認してください。

W,A,S,Dキーをおしてキャラクターを移動させることができます。
またマウスの左ボタンを押すとカメラを引く(俯瞰視点に移動し、キャラクターが小さく見える)ことができ、
右ボタンを押すとカメラを近づける(キャラクターが大きく見える)ことができます。



## サンプルゲームのコード

sample_common.cpp と sample_common.h　が、各サンプルの共通部分を抜き出したファイルです。
弾幕サンプルゲームは "danmaku.cpp"を、 リバーシは"reversi.cpp"を、
対戦格闘は "duel.cpp" をこの sample_common.cppとともにコンパイルしています。

